(function(){function t(a){const b=[],e=K[I];var d=u(1,2);const h=u(0,9),k=u(0,9);var f=0;if(1===d)if(k>=a-1){for(d=0;d<a;d++)0===c[h][k-d]&&f++;if(f===a)for(f=0;f<a;f++)c[h][k-f]=1,document.getElementById("s"+h+(k-f)).classList.add(e),b.push([h,k-f]);else t(a)}else{for(d=0;d<a;d++)0===c[h][k+d]&&f++;if(f===a)for(f=0;f<a;f++)c[h][k+f]=1,document.getElementById("s"+h+(k+f)).classList.add(e),b.push([h,k+f]);else t(a)}else if(h>=a-1){for(d=0;d<a;d++)0===c[h-d][k]&&f++;if(f===a)for(f=0;f<a;f++)c[h-f][k]=
1,document.getElementById("s"+(h-f)+k).classList.add(e),b.push([h-f,k]);else t(a)}else{for(d=0;d<a;d++)0===c[h+d][k]&&f++;if(f===a)for(f=0;f<a;f++)c[h+f][k]=1,document.getElementById("s"+(h+f)+k).classList.add(e),b.push([h+f,k]);else t(a)}0!==b.length&&I++}const c=[];var v=document.getElementById("gameboard");const w=[],u=(a,b)=>Math.floor(Math.random()*(b-a+1)+a);let I=0;const K=["Carrier","Battleship","Cruiser","Submarine","Destroyer"];for(var q=0;10>q;q++){c.push([]);for(let a=0;10>a;a++){c[q].push(0);
const b=document.createElement("div");var A=document.createElement("p");v.appendChild(b);b.appendChild(A);b.id="s"+a+q;A.id="p"+a+q;A.classList.add("numText");A=50*q;b.style.top=50*a+"px";b.style.left=A+"px"}}t(5);t(4);t(3);t(3);t(2);for(v=0;10>v;v++)for(w.push([]),q=0;10>q;q++)w[v].push(0),document.getElementById("s"+v+q).style.background="#80aaff",1===c[v][q]&&(document.getElementById("s"+v+q).style.background="white");let n=0,C=!1,D=!1,E=!1,F=!1,G=!1,g=0,x,z,p="",y=!0,m=0,l=0,H=!1;const B=function(a,
b){for(var e=0;10>e;e++)for(var d=0;10>d;d++)document.getElementById("s"+e+d).classList.contains(b)&&document.getElementById("s"+e+d).classList.contains("hit")&&(document.getElementById("s"+e+d).style.background="darkred");n-=a;p="";y=!0;l=0;for(d=0;10>d;d++)for(let k=0;10>k;k++){a=document.getElementById("s"+d+k).classList;e=a.contains;var h=b;h=h.charAt(0).toUpperCase()+h.slice(1);e.call(a,h)&&(c[d][k]=4)}a:for(b=0;10>b;b++)for(a=0;10>a;a++)if(2===c[b][a]){x=b;z=a;break a}},L=function(){const a=
x,b=z;if("ver"===p){if(!(9<a+1)){if(0===c[a+1][b]){document.getElementById("s"+(a+1)+b).style.background="#4d88ff";document.getElementById("s"+(a+1)+b).classList.add("miss");c[a+1][b]=3;g++;document.getElementById("p"+(a+1)+b).innerText=g;return}if(1===c[a+1][b]){document.getElementById("s"+(a+1)+b).style.background="red";document.getElementById("s"+(a+1)+b).classList.add("hit");c[a+1][b]=2;g++;n++;x++;document.getElementById("p"+(a+1)+b).innerText=g;return}}if(9<a+1||2===c[a+1][b]||3===c[a+1][b]||
4===c[a+1][b]){y&&(l=n+l,y=!1);if(-1<a-l&&0===c[a-l][b]){document.getElementById("s"+(a-l)+b).style.background="#4d88ff";document.getElementById("s"+(a-l)+b).classList.add("miss");c[a-l][b]=3;g++;document.getElementById("p"+(a-l)+b).innerText=g;return}if(-1<a-l&&1===c[a-l][b]){document.getElementById("s"+(a-l)+b).style.background="red";document.getElementById("s"+(a-l)+b).classList.add("hit");c[a-l][b]=2;g++;n++;x--;document.getElementById("p"+(a-l)+b).innerText=g;return}m=0;p="";y=!0;l--;l--}}if("hor"===
p){if(!(9<b+1)){if(0===c[a][b+1]){document.getElementById("s"+a+(b+1)).style.background="#4d88ff";document.getElementById("s"+a+(b+1)).classList.add("miss");c[a][b+1]=3;g++;document.getElementById("p"+a+(b+1)).innerText=g;return}if(1===c[a][b+1]){document.getElementById("s"+a+(b+1)).style.background="red";document.getElementById("s"+a+(b+1)).classList.add("hit");c[a][b+1]=2;g++;n++;z++;document.getElementById("p"+a+(b+1)).innerText=g;return}}if(9<b+1||2===c[a][b+1]||3===c[a][b+1]||4===c[a][b+1]){y&&
(l=n+l,y=!1);if(0===c[a][b-l]){document.getElementById("s"+a+(b-l)).style.background="#4d88ff";document.getElementById("s"+a+(b-l)).classList.add("miss");c[a][b-l]=3;g++;document.getElementById("p"+a+(b-l)).innerText=g;return}for(let e=1;10>e&&!(0>b-e);e++)if(1===c[a][b-e]){document.getElementById("s"+a+(b-e)).style.background="red";document.getElementById("s"+a+(b-e)).classList.add("hit");c[a][b-e]=2;g++;n++;document.getElementById("p"+a+(b-e)).innerText=g;return}m=0;p="";y=!0;l--;l--}}if(0===m&&
""===p){if(!(9<a+1)){if(0===c[a+1][b]){document.getElementById("s"+(a+1)+b).style.background="#4d88ff";document.getElementById("s"+(a+1)+b).classList.add("miss");c[a+1][b]=3;g++;m++;document.getElementById("p"+(a+1)+b).innerText=g;return}if(1===c[a+1][b]){document.getElementById("s"+(a+1)+b).style.background="red";document.getElementById("s"+(a+1)+b).classList.add("hit");c[a+1][b]=2;g++;n++;p="ver";m=0;x++;document.getElementById("p"+(a+1)+b).innerText=g;return}}m++}if(1===m&&""===p){if(!(0>a-1)){if(0===
c[a-1][b]){document.getElementById("s"+(a-1)+b).style.background="#4d88ff";document.getElementById("s"+(a-1)+b).classList.add("miss");c[a-1][b]=3;g++;m++;document.getElementById("p"+(a-1)+b).innerText=g;return}if(1===c[a-1][b]){document.getElementById("s"+(a-1)+b).style.background="red";document.getElementById("s"+(a-1)+b).classList.add("hit");c[a-1][b]=2;g++;n++;p="ver";m=0;x--;l--;document.getElementById("p"+(a-1)+b).innerText=g;return}}m++}if(2===m&&""===p){if(!(9<b+1)){if(0===c[a][b+1]){document.getElementById("s"+
a+(b+1)).style.background="#4d88ff";document.getElementById("s"+a+(b+1)).classList.add("miss");c[a][b+1]=3;g++;m++;document.getElementById("p"+a+(b+1)).innerText=g;return}if(1===c[a][b+1]){document.getElementById("s"+a+(b+1)).style.background="red";document.getElementById("s"+a+(b+1)).classList.add("hit");c[a][b+1]=2;g++;n++;p="hor";m=0;z++;document.getElementById("p"+a+(b+1)).innerText=g;return}}m++}3===m&&""===p&&(0===c[a][b-1]?(document.getElementById("s"+a+(b-1)).style.background="#4d88ff",document.getElementById("s"+
a+(b-1)).classList.add("miss"),c[a][b-1]=3,g++,m++,document.getElementById("p"+a+(b-1)).innerText=g):1===c[a][b-1]&&(document.getElementById("s"+a+(b-1)).style.background="red",document.getElementById("s"+a+(b-1)).classList.add("hit"),c[a][b-1]=2,g++,n++,p="hor",m=0,z--,l--,document.getElementById("p"+a+(b-1)).innerText=g))},J=function(){if(8>g){do if(4>g){var a=u(2,7);var b=u(2,7)}else a=u(1,8),b=u(1,8);while(0!==a%2&&0===b%2||0===a%2&&0!==b%2)}else{a=[];var e=0;C||a.push(5);D||a.push(4);F||a.push(3);
E||a.push(3);G||a.push(2);for(b=0;b<a.length;b++){for(var d=0;10>d;d++)for(var h=0;h<10-a[b]+1;h++){for(var k=0;k<a[b];k++)2!==c[d][h+k]&&3!==c[d][h+k]&&4!==c[d][h+k]&&e++;if(e===a[b])for(e=0;e<a[b];e++)w[d][h+e]++;e=0}for(d=0;10>d;d++)for(h=0;h<10-a[b]+1;h++){for(k=0;k<a[b];k++)2!==c[h+k][d]&&3!==c[h+k][d]&&4!==c[h+k][d]&&e++;if(e===a[b])for(e=0;e<a[b];e++)w[h+e][d]++;e=0}}a=0;b=[];for(e=0;10>e;e++)for(d=0;10>d;d++)w[e][d]===a?b.push([e,d]):w[e][d]>a&&(a=w[e][d],b=[],b.push([e,d]));a=b[u(0,b.length-
1)];[a,b]=a;for(e=0;10>e;e++)for(d=0;10>d;d++)w[e][d]=0}x=a;z=b;0===c[a][b]?(document.getElementById("s"+a+b).style.background="#4d88ff",document.getElementById("s"+a+b).classList.add("miss"),c[a][b]=3,g++,document.getElementById("p"+a+b).innerText=g):1===c[a][b]?(document.getElementById("s"+a+b).style.background="red",document.getElementById("s"+a+b).classList.add("hit"),c[a][b]=2,g++,n++,document.getElementById("p"+a+b).innerText=g):2!==c[a][b]&&3!==c[a][b]&&4!==c[a][b]||J()};document.getElementById("compfr").addEventListener("click",
function(){for(let a=0;100>a&&!H;a++)if(!H){0<n?L():J();let b=0,e=0,d=0,h=0,k=0;for(let f=0;10>f;f++)for(let r=0;10>r;r++)document.getElementById("s"+f+r).classList.contains("Carrier")&&document.getElementById("s"+f+r).classList.contains("hit")&&!C&&b++,document.getElementById("s"+f+r).classList.contains("Battleship")&&document.getElementById("s"+f+r).classList.contains("hit")&&!D&&e++,document.getElementById("s"+f+r).classList.contains("Cruiser")&&document.getElementById("s"+f+r).classList.contains("hit")&&
!E&&d++,document.getElementById("s"+f+r).classList.contains("Submarine")&&document.getElementById("s"+f+r).classList.contains("hit")&&!F&&h++,document.getElementById("s"+f+r).classList.contains("Destroyer")&&document.getElementById("s"+f+r).classList.contains("hit")&&!G&&k++;5===b&&(C=!0,B(5,"Carrier"));4===e&&(D=!0,B(4,"Battleship"));3===d&&(E=!0,B(3,"Cruiser"));3===h&&(F=!0,B(3,"Submarine"));2===k&&(G=!0,B(2,"Destroyer"));C&&D&&E&&F&&G&&(H=!0,document.getElementById("totalShots").innerText=g,document.getElementById("totalHits").innerText=
17,document.getElementById("totalMisses").innerText=g-17,document.getElementById("hitPercentage").innerText=Math.round(17/g*100)+"%")}})})();
